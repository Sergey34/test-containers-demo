[
  {
    "job_id": "1",
    "job_name": "name",
    "job_description": "erqweq",
    "schedule": "0 * * * dsdfsd* ?",
    "global_config": {
      "target_index": "window",
      "rotation_target_index_type": "DAILY",
      "rotation_target_index_date_format": "YYYY-MM"
    },
    "steps": [
      {
        "id": "errors",
        "chunkSize": 100,
        "reader": {
          "type": "ES_SCROLL",
          "index": "error*",
          "fields": [
            "id",
            "code",
            "related_sales_order"
          ],
          "query": "{\"match_all\": {}}",
          "order": {
            "field": "@timestamp",
            "type": "ASK"
          },
          "script_fields": [
            {
              "field_name": "field_1",
              "script": {
                "lang": "painless",
                "source": "doc['price'].value * 2 * params.factor",
                "params": "{\"factor\": 2.0}"
              }
            }
          ]
        },
        "processor": {
          "type": "GROOVY",
          "script": "source.status = source.status_history.find {it.status in ['actual', 'handling']}"
        },
        "writer": {
          "type": "UPDATE",
          "id": "id",
          "target_field": "target_field"
        }
      },
      {
        "id": "orders",
        "chunkSize": 100,
        "reader": {
          "type": "ES_SCROLL",
          "index": "order*",
          "fields": [
            "id",
            "name"
          ],
          "query": "{\"match_all\": {}}",
          "script_fields": [
            {
              "field_name": "field_1",
              "script": {
                "lang": "painless",
                "source": "doc['price'].value * 2 * params.factor",
                "params": "{\"factor\": 2.0}"
              }
            }
          ]
        },
        "processor": {
          "type": "GROOVY",
          "script": "source.status = source.status_history.find {it.status in ['actual', 'handling']}"
        },
        "writer": {
          "type": "UPDATE_BY_SCRIPT",
          "script": {
            "lang": "painless",
            "source": "doc['price'].value * 2 * params.factor",
            "params": "{\"factor\": 2.0}"
          }
        }
      },
      {
        "id": "tasks",
        "chunkSize": 100,
        "reader": {
          "type": "ES_SCROLL",
          "index": "task*",
          "fields": [
            "id",
            "name"
          ],
          "query": "{\"match_all\": {}}",
          "script_fields": [
            {
              "field_name": "field_1",
              "script": {
                "lang": "painless",
                "source": "doc['price'].value * 2 * params.factor",
                "params": "{\"factor\": 2.0}"
              }
            }
          ]
        },
        "processor": {
          "type": "GROOVY",
          "script": "source.status = source.status_history.find {it.status in ['actual', 'handling']}"
        },
        "writer": {
          "type": "UPDATE_BY_QUERY",
          "query": "{\"match_all\": {}}",
          "script": {
            "source": "ctx._source.likes++",
            "lang": "painless"
          },
          "scroll_size": 1000,
          "routing": 1000,
          "slices": 5,
          "conflicts": "proceed"
        }
      }
    ]
  }
]